<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Touch Fuzzy</title>

    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html {
        min-height: 90vh;

        font-size: calc(1rem + 1vw);
        line-height: 1.5;
        font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto",
          "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",
          "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      }
      body {
        display: flex;
        flex-flow: column;
        align-items: center;
        justify-content: center;

        min-height: 90vh;
        margin: 0;
        padding: calc(1rem + 1vw);
      }

      a {
        color: green;
      }
      a.button {
        display: inline-block;
        padding: 0.3em 0.6em;

        color: white;
        background-color: darkgreen;
        border-radius: 4px;

        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <textarea hidden readonly aria-hidden="true" name="csscode" id="csscode">
			:root {
  --animation-delay: 10s;
  --animation-duration: 30s;
  --animation-warp: 8s;
}
* {
  animation-duration: var(--animation-duration),
    calc(var(--animation-duration) + var(--animation-warp)),
    calc(var(--animation-duration) + var(--animation-warp) * 2);
  animation-iteration-count: infinite;
  animation-direction: alternate;
  animation-delay: var(--animation-delay);
}

body {
  animation-name: skew;
  animation-delay: 60s;
}

figure,
img,
picture,
video,
iframe,
svg,
canvas,
input,
textarea,
button,
pre,
hr {
  animation-name: hueRotate, scale3D, origin;
}
p,
li,
dd,
dt,
dl,
figcaption,
blockquote,
cite,
h1,
h2,
h3,
h4,
h5,
h6,
a,
strong,
em {
  --animation-duration: 10s;
  animation-name: blur, skew;
}

@keyframes hueRotate {
  from {
    filter: hue-rotate(0deg) saturate(100%);
  }
  to {
    filter: hue-rotate(180deg) saturate(120%);
  }
}
@keyframes scale3D {
  from {
    transform: scale3D(0.95, 0.95, 1) skew(-1deg, -1deg);
  }
  to {
    transform: scale3D(1.25, 1.25, 1) skew(1deg, 1deg);
  }
}
@keyframes skew {
  0% {
    transform: skew(0deg, 0deg);
  }
  33% {
    transform: skew(0.5deg, 0.5deg);
  }
  66% {
    transform: skew(-0.5deg, -0.5deg);
  }
  100% {
    transform: skew(0deg, 0deg);
  }
}
@keyframes origin {
  0% {
    transform-origin: 50% 50%;
  }
  20% {
    transform-origin: 40% 50%;
  }
  40% {
    transform-origin: 60% 40%;
  }
  60% {
    transform-origin: 40% 60%;
  }
  80% {
    transform-origin: 50% 40%;
  }
  100% {
    transform-origin: 50% 50%;
  }
}

@keyframes blur {
  from {
    filter: blur(0em) contrast(100%);
  }
  to {
    filter: blur(0.1em) contrast(200%);
  }
}

		</textarea
    >

    <textarea hidden readonly aria-hidden="true" name="jscode" id="jscode">
					
					function getDizzy() {
						var things = document.querySelectorAll("*");
						for (var thing of things) {
							var time = 5 + Math.floor(Math.random() * Math.floor(30));
							thing.style.setProperty("--animation-delay", time * 1.5 + "s");
							thing.style.setProperty("--animation-warp", time * 2.5 + "s");
							thing.style.setProperty("--degree-warp", time * 0.1 + "deg");
						}
					}
					
					
					touchFuzzy();
					getDizzy();

				</textarea>
    <p>Drag to your bookmarks bar:</p>
    <a id="bookmarklet-link" class="button" href="#">TouchFuzzy</a>

    <details hidden>
      <summary>But... I can't. I'm on a phone.</summary>
      Try
      <a
        href="https://www.cultofmac.com/500532/how-to-add-bookmarklet-mobile-iphone-safari/"
        >this</a
      >.
      <textarea readonly name="bookmarklet-text" id="bookmarklet-text">
      </textarea>
    </details>

    <script>
      function cleanCode(code) {
        return code.trim();
      }

      function generateBookmarklet() {
        var css = document
          .getElementById("csscode")
          .value.replace(/(\r\n|\n|\r|\t)/gm, "");
        console.log(css);

        var cssInJS =
          "function touchFuzzy() { var style = document.createElement('style'); style.innerHTML = '" +
          cleanCode(css) +
          "'; document.head.appendChild(style); }";
        console.log(cssInJS);

        var js =
          cssInJS +
          document
            .getElementById("jscode")
            .value.replace(/(\r\n|\n|\r|\t)/gm, "");
        console.log(js);

        var output =
          "javascript:" +
          encodeURIComponent("(function(){" + cleanCode(js) + "})();");

        var link = document.getElementById("bookmarklet-link");
        link.href = output;

        var textarea = document.getElementById("bookmarklet-text");
        textarea.value = output;
      }

      generateBookmarklet();
    </script>
  </body>
</html>
